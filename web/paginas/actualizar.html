<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actualizando pais</title>

    <!--Bootstrap 4 css-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

        


</head>

<body>

    <!-- As a link -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/paginas/index.html" onclick="resetear()">Inicio</a>
            <h1 class="navbar-brand margin-auto">App Agenda Paises</h1>
        </div>
    </nav>


    <div class="container">
        <div class="row">

            <div class="card col-md-6 offset-md-3 mt-4">
                <div class="card-title">
                    <h3 class="text-center">Actualizando el pais</h3>
                </div>
                <form>


                    <input class="form-control mt-" type="text" id="nombre" required placeholder="Nombre del pais">
                    <br>
                    <label for="fecha">Visitado el: </label>
                    <input class="form-control" type="date" required id="fecha">
                    <br>
                    <textarea required class="form-control" id="comentarios" cols="20" rows="5"
                        placeholder="Comentarios"></textarea>

                    <label for="color">Color etiqueta</label>
                    <input class="form-control" type="color" id="color">


                    <input class="form-control btn btn-secondary mt-5" type="button" onclick="actualizar()"
                        value="Guardar" id="guardar">
                </form>


            </div>



        </div>




    </div>

    <script>
        let indice =(sessionStorage.getItem(sessionStorage.key(1)))
        let obj = JSON.parse(localStorage.getItem(indice))
        if (sessionStorage.length === 0) {

            alert("No existe el elemento a actualizar")
        } else {

            
            let nombre = document.getElementById("nombre")
            let fecha = document.getElementById("fecha")
            let comentarios = document.getElementById("comentarios")
            let color = document.getElementById("color")
            nombre.setAttribute("value", obj.nombre)
            nombre.setAttribute("readonly", "true")
            fecha.setAttribute("value", obj.fecha)
            comentarios.textContent = obj.comentarios
            color.setAttribute("value", obj.color)


        }

        function resetear() {
            sessionStorage.clear()
        }

        function actualizar() {

            nombreact = nombre.value
            fechaact = fecha.value
            comentariosact = comentarios.value
            coloract = color.value

            let infoactual = {

                "nombre": nombreact,
                "fecha": fechaact,
                "comentarios": comentariosact,
                "color": coloract,
                "capital": obj.capital,
                "codigo": obj.codigo,
                "bandera": obj.bandera,
            


            }
            
            let json = JSON.stringify(infoactual)
            
            localStorage.setItem(indice, json)
            
            
            alert("Se actualizaron los datos correctamente!")
            resetear()
            window.location = ("./mostrarpaises.html")
           



        }


    </script>



    <!--Scripts customs-->
    <script src="/codigo/funciones.js"></script>
    <script src="/codigo/pais.js"></script>


    <!--Scripts bootstrap 4-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>

</body>

</html>